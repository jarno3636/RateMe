/* /app/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* --------- Base theme --------- */
:root {
  --bg: #0b0b0f;
  --panel: rgba(255,255,255,0.05);
  --border: rgba(255,255,255,0.10);
  --fg: #e5e7eb;
  --muted: #a1a1aa;
  --primary: #ec4899; /* pink-500 */
  --focus: rgba(236, 72, 153, 0.5);
  color-scheme: dark;
}

html, body {
  background: var(--bg);
  color: var(--fg);
  min-height: 100%;
}

* { -webkit-tap-highlight-color: transparent; }
a { text-decoration: none; color: inherit; }

/* Smooth fonts + selection color */
html { @apply antialiased; }
::selection { background: rgba(236,72,153,0.35); }

/* Scrollbar, subtle (does nothing on iOS/Safari mobile, safe elsewhere) */
*::-webkit-scrollbar { width: 10px; height: 10px; }
*::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 9999px; }
*::-webkit-scrollbar-track { background: transparent; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}

/* --------- Layout helpers --------- */
.container { @apply mx-auto max-w-6xl px-4; }
.stack-lg  { @apply space-y-8; }
.stack-md  { @apply space-y-6; }
.stack-sm  { @apply space-y-3; }

/* Prevent button crowds on small screens */
.actions-row {
  @apply flex flex-wrap gap-2;
}

/* --------- Components layer --------- */
@layer components {
  .card {
    @apply rounded-2xl border p-6 shadow;
    background: var(--panel);
    border-color: var(--border);
  }

  .badge {
    @apply inline-flex items-center gap-1 rounded-full border px-3 py-1 text-xs;
    border-color: var(--border);
    background: rgba(255,255,255,0.04);
  }

  .badge-primary {
    @apply border-pink-500/40 bg-pink-500/10 text-pink-200;
  }

  .pill {
    @apply inline-flex items-center rounded-full border px-3 py-1 text-xs;
    border-color: var(--border);
  }

  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-medium transition;
    @apply border hover:bg-white/10 focus:outline-none focus:ring-2;
    border-color: var(--border);
    box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.0);
  }
  .btn:focus-visible { box-shadow: 0 0 0 3px var(--focus); }
  .btn:disabled { @apply opacity-50 cursor-not-allowed; }

  .btn-primary {
    @apply border-pink-500/60 hover:bg-pink-500/10;
  }
  .btn-secondary {
    @apply border-white/15 hover:bg-white/10;
  }
  .btn-danger {
    @apply border-red-500/50 hover:bg-red-500/10;
  }
  .btn-ghost {
    @apply border-transparent hover:bg-white/10;
  }

  .btn-icon {
    @apply inline-flex items-center justify-center rounded-xl p-2 border;
    border-color: var(--border);
  }

  /* Input controls */
  input, textarea, select {
    @apply w-full rounded-xl border bg-black/40 px-3 py-2 outline-none transition;
    border-color: var(--border);
  }
  input:focus, textarea:focus, select:focus {
    @apply ring-2;
    --tw-ring-color: var(--focus);
  }
  label { @apply text-sm opacity-80; }

  /* Skeleton */
  .skeleton { @apply animate-pulse rounded-md bg-white/10; }

  /* Divider */
  .divider { @apply my-2 h-px w-full bg-white/10; }

  /* Avatar backdrop helper:
     Wrap an <img> with this class to give a subtle circle background.
     Pairs nicely with your /avatar.png fallback handled in components. */
  .avatar-backdrop {
    @apply rounded-full ring-1 ring-white/10 bg-gradient-to-br from-white/5 to-white/0;
  }
}

/* --------- Utilities layer --------- */
@layer utilities {
  .text-muted { color: var(--muted); }
  .ring-focus { box-shadow: 0 0 0 3px var(--focus); }

  /* Clamp helpers */
  .clamp-1 { display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; }
  .clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

  /* Max-width content blocks */
  .prose-card { @apply max-w-3xl; }
}
